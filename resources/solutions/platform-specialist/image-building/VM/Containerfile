FROM registry.redhat.io/rhel10/rhel-bootc:10.0

## Enable subscription
RUN rm -rf /etc/rhsm-host
RUN subscription-manager register --username $REDHAT_USERNAME --password $REDHAT_PASSWORD

## Install base packages
#RUN dnf -y update
RUN dnf -y install rhc tmux && dnf clean all

## Install additional packages


## Clean-up
RUN subscription-manager unregister && subscription-manager clean && insights-client --unregister
RUN ln -s /run/secrets/rhsm /etc/rhsm-host
